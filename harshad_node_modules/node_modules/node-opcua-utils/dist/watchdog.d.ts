/// <reference types="node" />
import { EventEmitter } from "events";
export interface IWatchdogData2 {
    key: number;
    subscriber: ISubscriber;
    timeout: number;
    last_seen: number;
    visitCount: number;
}
export interface ISubscriber {
    _watchDog?: WatchDog;
    _watchDogData: IWatchdogData2;
    watchdogReset: () => void;
    keepAlive?: () => void;
    onClientSeen?: (t: Date) => void;
}
export declare class WatchDog extends EventEmitter {
    private readonly _watchdogDataMap;
    private _counter;
    private _current_time;
    private _timer;
    private readonly _visit_subscriber_b;
    constructor();
    private _visit_subscriber;
    /**
     * add a subscriber to the WatchDog.
     * @method addSubscriber
     *
     * add a subscriber to the WatchDog.
     *
     * This method modifies the subscriber be adding a
     * new method to it called 'keepAlive'
     * The subscriber must also provide a "watchdogReset". watchdogReset will be called
     * if the subscriber failed to call keepAlive withing the timeout period.
     * @param subscriber
     * @param timeout
     * @return {number}
     */
    addSubscriber(subscriber: ISubscriber, timeout: number): number;
    removeSubscriber(subscriber: ISubscriber): void;
    shutdown(): void;
    /**
     * returns the number of subscribers using the WatchDog object.
     * @property subscriberCount
     * @type {number}
     */
    readonly subscriberCount: number;
    private _start_timer;
    private _stop_timer;
}
