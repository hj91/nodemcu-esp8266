"use strict";var Stampit=require("stampit"),Promise=require("bluebird");module.exports=Stampit().init(function(){var e=function(){this.addResponseHandler(3,t)}.bind(this),t=function(e,t){if(this.log.debug("handling read holding registers response."),this.log.debug("on read holding registers got PDU: "+JSON.stringify(e)+" pdu.length:"+e.length),this.log.debug("request: "+JSON.stringify(t)),e.length<2)t.defer.reject(new Error("PDU length less than two"));else{var r=e.readUInt8(0);if(3===r){for(var i=e.readUInt8(1),n={fc:r,byteCount:i,payload:e.slice(2),register:[]},s=i/2,o=0;o<s;o+=1)n.register.push(e.readUInt16BE(2+2*o));t.defer.resolve(n)}else t.defer.reject(new Error("FC "+r+" is not valid - FC3 is expected"))}}.bind(this);this.readHoldingRegisters=function(e,t){return new Promise(function(r,i){var n=Buffer.allocUnsafe(5);n.writeUInt8(3),n.writeUInt16BE(e,1),n.writeUInt16BE(t,3),this.queueRequest(3,n,{resolve:r,reject:i})}.bind(this))},e()});
//# sourceMappingURL=../../maps/handler/client/ReadHoldingRegisters.js.map
