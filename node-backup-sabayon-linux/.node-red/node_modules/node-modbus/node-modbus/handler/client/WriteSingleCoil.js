"use strict";var Stampit=require("stampit"),Promise=require("bluebird");module.exports=Stampit().init(function(){var e=function(){this.addResponseHandler(5,t)}.bind(this),t=function(e,t){if(this.log.debug("handling write single coil response."),this.log.debug("on write single coil got PDU: "+JSON.stringify(e)+" pdu.length:"+e.length),this.log.debug("request: "+JSON.stringify(t)),e.length<5)t.defer.reject(new Error("PDU length less than five"));else{var i=e.readUInt8(0);if(5===i){var r=e.readUInt16BE(1),n=e.readUInt16BE(3),s={fc:i,outputAddress:r,outputValue:0!==n&&(65280===n||void 0)};t.defer.resolve(s)}else t.defer.reject(new Error("FC"+i+" is not valid - FC5 is expected"))}}.bind(this);this.writeSingleCoil=function(e,t){return new Promise(function(i,r){var n=t instanceof Buffer?t.readUInt8(0)>0:t,s=Buffer.allocUnsafe(5);s.writeUInt8(5,0),s.writeUInt16BE(e,1),s.writeUInt16BE(n?65280:0,3),this.queueRequest(5,s,{resolve:i,reject:r})}.bind(this))},e()});
//# sourceMappingURL=../../maps/handler/client/WriteSingleCoil.js.map
