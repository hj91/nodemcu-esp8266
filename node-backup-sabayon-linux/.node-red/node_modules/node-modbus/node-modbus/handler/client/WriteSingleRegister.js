"use strict";var Stampit=require("stampit"),Promise=require("bluebird");module.exports=Stampit().init(function(){var e=function(){this.addResponseHandler(6,r)}.bind(this),r=function(e,r){if(this.log.debug("handling write single register response."),this.log.debug("on write single register got PDU: "+JSON.stringify(e)+" pdu.length:"+e.length),this.log.debug("request: "+JSON.stringify(r)),e.length<5)r.defer.reject(new Error("PDU length less than five"));else{var t=e.readUInt8(0);if(6===t){var i={fc:t,registerAddress:e.readUInt16BE(1),registerValue:e.readUInt16BE(3),registerAddressRaw:e.slice(1,3),registerValueRaw:e.slice(3,5)};r.defer.resolve(i)}else r.defer.reject(new Error("FC "+t+" is not valid - FC6 is expected"))}}.bind(this);this.writeSingleRegister=function(e,r){return new Promise(function(t,i){var s=r instanceof Buffer?r.readUInt16BE(0):r,n=Buffer.allocUnsafe(5);n.writeUInt8(6,0),n.writeUInt16BE(e,1),n.writeUInt16BE(s,3),this.queueRequest(6,n,{resolve:t,reject:i})}.bind(this))},e()});
//# sourceMappingURL=../../maps/handler/client/WriteSingleRegister.js.map
