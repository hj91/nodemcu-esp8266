"use strict";var stampit=require("stampit");module.exports=stampit().init(function(){var e=function(){this.log.debug("initiating read holding registers request handler."),this.responseDelay||(this.responseDelay=0),this.setRequestHandler(3,t)}.bind(this),t=function(e,t){setTimeout(function(){if(this.log.debug("handling read holding registers request."),5!==e.length){this.log.debug("wrong pdu length.");var i=Buffer.allocUnsafe(2);return i.writeUInt8(131,0),i.writeUInt8(2,1),void t(i)}var r=2*e.readUInt16BE(1),s=e.readUInt16BE(3);this.emit("readHoldingRegistersRequest",r,s);var n=this.getHolding();if(r>n.length||r+2*s>n.length){this.log.debug("request outside register boundaries.");var a=Buffer.allocUnsafe(2);return a.writeUInt8(131,0),a.writeUInt8(2,1),void t(a)}var d=Buffer.allocUnsafe(2);d.writeUInt8(3,0),d.writeUInt8(2*s,1);var o=Buffer.concat([d,n.slice(r,r+2*s)]);this.log.debug("finished read holding register request."),t(o)}.bind(this),this.responseDelay)}.bind(this);e()});
//# sourceMappingURL=../../maps/handler/server/ReadHoldingRegisters.js.map
