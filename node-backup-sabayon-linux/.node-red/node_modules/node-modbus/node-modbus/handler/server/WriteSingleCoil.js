"use strict";var stampit=require("stampit");module.exports=stampit().init(function(){var t=function(){this.log.debug("initiating write single coil request handler."),this.responseDelay||(this.responseDelay=0),this.setRequestHandler(5,e)}.bind(this),e=function(t,e){setTimeout(function(){if(this.log.debug("handling write single coil request."),5!==t.length){var i=Buffer.allocUnsafe(2);return i.writeUInt8(133,0),i.writeUInt8(2,1),void e(i)}var r=t.readUInt16BE(1),n=!(0===t.readUInt16BE(3));if(0!==t.readUInt16BE(3)&&65280!==t.readUInt16BE(3)){var s=Buffer.allocUnsafe(2);return s.writeUInt8(133,0),s.writeUInt8(3,1),void e(s)}this.emit("preWriteSingleCoilRequest",r,n);var a=this.getCoils();if(r>8*a.length){var o=Buffer.allocUnsafe(2);return o.writeUInt8(133,0),o.writeUInt8(2,1),void e(o)}var l=Buffer.allocUnsafe(5);l.writeUInt8(5,0),l.writeUInt16BE(r,1),l.writeUInt16BE(n?65280:0,3);var u=a.readUInt8(Math.floor(r/8)),f=void 0;f=n?u|Math.pow(2,r%8):u&~Math.pow(2,r%8),a.writeUInt8(f,Math.floor(r/8)),this.emit("postWriteSingleCoilRequest",r,n),e(l)}.bind(this),this.responseDelay)}.bind(this);t()});
//# sourceMappingURL=../../maps/handler/server/WriteSingleCoil.js.map
