"use strict";var stampit=require("stampit"),EventBus=require("stampit-event-bus"),logger=require("stampit-log"),core=stampit().refs({logLabel:"ModbusCoreServer",logLevel:"info",logEnabled:!0}).compose(EventBus,logger).init(function(){var t=void 0,e=void 0,i=void 0,o={},n=function(){t=this.coils?this.coils:Buffer.alloc(1024,0),e=this.holding?this.holding:Buffer.alloc(1024,0),i=this.input?this.input:Buffer.alloc(1024,0),this.logLevel&&(this.log.logLevel=this.logLevel),this.log.info("log level: "+this.log.logLevel)}.bind(this);this.onData=function(t,e){this.log.debug("incoming data");var i=t.readUInt8(0),n=o[i];if(!n){this.log.debug("no handler for fc",i);var l=Buffer.alloc(2);return l.writeUInt8(i+128,0),l.writeUInt8(1,1),void e(l)}n(t,function(t){e(t)})}.bind(this),this.setRequestHandler=function(t,e){return this.log.debug("setting request handler",t),o[t]=e,this},this.getCoils=function(){return t},this.getInput=function(){return i},this.getHolding=function(){return e},n()});module.exports=core;
//# sourceMappingURL=maps/modbus-server-core.js.map
