"use strict";module.exports=function(i){require("source-map-support").install();var r=require("./core/modbus-core"),s=[];i.nodes.registerType("modbus-response-filter",function(e){i.nodes.createNode(this,e),this.name=e.name,this.filter=e.filter,this.registers=e.registers||0,this.filterResponseBuffer=e.filterResponseBuffer,this.filterValues=e.filterValues,this.filterInput=e.filterInput,this.showStatusActivities=e.showStatusActivities,this.showErrors=e.showErrors,this.ioFile=i.nodes.getNode(e.ioFile);var t=this;s=t.ioFile.configData,t.ioFile.on("updatedConfig",function(e){s=e,r.internalDebug("Filter Config Data Update")}),t.filterFromPayload=function(e){return e.payload=e.payload.filter(function(e){return e.name===t.filter}),t.filterResponseBuffer&&delete e.responseBuffer,t.filterValues&&delete e.values,t.filterInput&&delete e.input,e},t.on("input",function(e){t.registers?e.payload.length&&e.payload.length===t.registers?t.send(t.filterFromPayload(e)):(t.showErrors&&t.error(new Error("Register Length Does Not Match Setting "+t.registers)),r.internalDebug("Register Length Does Not Match Setting "+t.registers)):t.send(t.filterFromPayload(e))})}),i.httpAdmin.get("/modbus/iofile/valuenames",i.auth.needsPermission("iofile.read"),function(e,t){t.json(s)})};
//# sourceMappingURL=maps/modbus-response-filter.js.map
