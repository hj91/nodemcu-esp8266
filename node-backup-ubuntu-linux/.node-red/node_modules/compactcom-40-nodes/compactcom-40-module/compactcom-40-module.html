<script type="text/javascript">
   RED.nodes.registerType( 'compactcom-40-module', {
      category: 'config',
      defaults: {
         deviceName : { value : "CompactCom 40", required : true },
         ipAddress : { value : "0.0.0.0", required : true },
         useAuth : { value : "" },
         authType : { value : "Basic" }
      },
      credentials: {
         username : { type : "text" },
         password : { type : "password" }
      },
      label: function() {
         return this.deviceName + ":" + this.ipAddress;
      },
      oneditprepare : function(){
         $("#node-config-input-useAuth" ).change( function(){
            if( $(this).is( ":checked" ) )
            {
               $( ".node-config-input-useAuth-row" ).show();
            }
            else
            {
               $( ".node-config-input-useAuth-row" ).hide();
               $( "#node-config-input-username" ).val( '' );
               $( "#node-config-input-password" ).val( '' );
               $( "#node-config-input-authType" ).val( '' );
            }
         } );

         if( this.credentials.username || this.credentials.has_password )
         {
            $( "#node-config-input-useAuth" ).prop( "checked", true );
         }
         else
         {
            $( "#node-config-input-useAuth" ).prop( 'checked', false );
         }

         $( "#node-config-input-useAuth" ).change();
      }
    });
</script>

<script type="text/x-red" data-template-name="compactcom-40-module">
    <div class="form-row">
        <label for="node-config-input-deviceName"><i class="icon-tag"></i> Device name</label>
        <input type="text" id="node-config-input-deviceName">
    </div>
    <div class="form-row">
        <label for="node-config-input-ipAddress"><i class="fa fa-location-arrow"></i> IP address</label>
        <input type="text" id="node-config-input-ipAddress">
    </div>
    <div class="form-row">
        <input type="checkbox" id="node-config-input-useAuth" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-config-input-useAuth">Use authentication</label>

        <div style="margin-left: 20px" class="node-config-input-useAuth-row hide">
           <div class="form-row">
              <label for="node-config-input-username"><i class="fa fa-user"></i> Username</label>
              <input type="text" id="node-config-input-username">
           </div>
           <div class="form-row">
              <label for="node-config-input-password"><i class="fa fa-key"></i> Password</label>
              <input type="password" id="node-config-input-password">
           </div>
           <div class="form-row">
              <label for="node-config-input-authType"><i class="fa fa-lock"></i> Auth type</label>
              <select type="text" id="node-config-input-authType">
                  <option value="basic">Basic</option>
                  <option value="digest">Digest</option>
              </select>
           </div>
        </div>
    </div>
</script>