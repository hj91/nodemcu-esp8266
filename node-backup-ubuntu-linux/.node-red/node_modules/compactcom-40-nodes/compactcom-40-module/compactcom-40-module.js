module.exports = function( RED ) {

   function CompactCom40ModuleNode( n ) {

      var sendImmediately;

      RED.nodes.createNode( this, n );
      this.ipAddress = n.ipAddress;
      this.auth = null;

      if( this.credentials && this.credentials.username )
      {
         if( n.authType == "digest" )
         {
            sendImmediately = false;
         }
         else
         {
            sendImmediately = true;
         }

         this.auth = { user : this.credentials.username,
                       pass : this.credentials.password,
                       sendImmediately : sendImmediately };
      }
   }

   RED.nodes.registerType( "compactcom-40-module", CompactCom40ModuleNode, {
      credentials : {
         username : { type : "text" },
         password : { type : "password" }
      }
} );
}