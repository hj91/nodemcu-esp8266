"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const del = require("del");
const path = require("path");
const lib_1 = require("../lib");
const tmpFolder = path.join(__dirname, "../tmp");
lib_1.g_config.silent = !process.env.VERBOSE;
function grep(data, regExp) {
    return data
        .split("\n")
        .filter((l) => l.match(regExp))
        .join("\n");
}
exports.grep = grep;
let doneOnce = false;
function beforeTest(self, f) {
    self.timeout("5 minutes");
    const testData = {
        tmpFolder: ""
    };
    before((done) => {
        function __done() {
            doneOnce = true;
            if (f) {
                f(done);
            }
            else {
                done();
            }
        }
        testData.tmpFolder = tmpFolder;
        if (doneOnce) {
            return __done();
        }
        del(tmpFolder).then(() => {
            lib_1.mkdir(tmpFolder);
            __done();
        });
    });
    return testData;
}
exports.beforeTest = beforeTest;
//# sourceMappingURL=helpers.js.map