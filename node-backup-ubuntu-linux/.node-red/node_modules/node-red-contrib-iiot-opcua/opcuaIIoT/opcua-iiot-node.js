"use strict";module.exports=function(t){require("source-map-support").install();var a=require("./core/opcua-iiot-core");t.nodes.registerType("OPCUA-IIoT-Node",function(e){t.nodes.createNode(this,e),this.nodeId=e.nodeId,this.datatype=e.datatype,this.value=e.value,this.topic=e.topic,this.name=e.name,this.injectType=e.injectType,this.showErrors=e.showErrors;var s=this;s.subscribed=!1,s.status({fill:"blue",shape:"ring",text:"new"}),s.on("input",function(t){if(t.nodetype="node",t.injectType=t.injectType||s.injectType,s.subscribed=!s.subscribed,"listen"===s.injectType?s.subscribed?s.status({fill:"blue",shape:"dot",text:"subscribed"}):s.status({fill:"blue",shape:"ring",text:"not subscribed"}):s.status({fill:"blue",shape:"dot",text:"injected"}),t.topic=t.topic||s.topic,t.addressSpaceItems=t.addressSpaceItems||[],"write"===s.injectType){t.valuesToWrite=t.valuesToWrite||[],t.addressSpaceItems.push({name:s.name,nodeId:s.nodeId,datatypeName:s.datatype});try{t.valuesToWrite.push(a.convertDataValueByDataType({value:t.payload||s.value},s.datatype))}catch(e){a.internalDebugLog(e),s.showErrors&&s.error(e,t)}}else t.addressSpaceItems.push({name:s.name,nodeId:s.nodeId,datatypeName:s.datatype});a.internalDebugLog("node msg stringified: "+JSON.stringify(t)),s.send(t)})})};
//# sourceMappingURL=maps/opcua-iiot-node.js.map
