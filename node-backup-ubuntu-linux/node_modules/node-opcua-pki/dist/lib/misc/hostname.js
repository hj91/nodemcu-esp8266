"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const os_1 = require("os");
function trim(str, length) {
    if (!length) {
        return str;
    }
    return str.substr(0, Math.min(str.length, length));
}
let _fullyQualifiedDomainNameCache = null;
function get_fully_qualified_domain_name(maxLength) {
    maxLength = maxLength ? maxLength : 0;
    if (_fullyQualifiedDomainNameCache) {
        return trim(_fullyQualifiedDomainNameCache, maxLength);
    }
    let fqdn;
    if (process.platform === "win32") {
        // http://serverfault.com/a/73643/251863
        const env = process.env;
        fqdn = env.COMPUTERNAME + ((env.USERDNSDOMAIN && env.USERDNSDOMAIN.length > 0) ? "." + env.USERDNSDOMAIN : "");
        _fullyQualifiedDomainNameCache = fqdn;
    }
    else {
        fqdn = null;
        try {
            fqdn = require("fqdn");
            _fullyQualifiedDomainNameCache = fqdn();
            if (/sethostname/.test(_fullyQualifiedDomainNameCache)) {
                _fullyQualifiedDomainNameCache = os_1.hostname();
            }
        }
        catch (err) {
            // fall back to old method
            _fullyQualifiedDomainNameCache = os_1.hostname();
        }
    }
    return trim(_fullyQualifiedDomainNameCache, maxLength);
}
exports.get_fully_qualified_domain_name = get_fully_qualified_domain_name;
// note : under windows ... echo %COMPUTERNAME%.%USERDNSDOMAIN%
//# sourceMappingURL=hostname.js.map