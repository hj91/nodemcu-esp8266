"use strict";module.exports=function(r){require("source-map-support").install();var s=require("./core/opcua-iiot-core-discovery");r.nodes.registerType("OPCUA-IIoT-Discovery",function(e){r.nodes.createNode(this,e),this.name=e.name,this.discoveryPort=e.discoveryPort||s.DEFAULT_OPCUA_DISCOVERY_PORT;var t=this,o=new s.core.nodeOPCUA.OPCUADiscoveryServer({port:t.discoveryPort});t.status({fill:"yellow",shape:"ring",text:"starting"}),s.detailDebugLog("discovery endpoints:"+o._get_endpoints()),o.start(function(){s.internalDebugLog("discovery server started"),t.status({fill:"green",shape:"dot",text:"active"})}),t.on("input",function(e){e.payload={discoveryUrls:o.getDiscoveryUrls()||[],endpoints:o.endpoints||[]},t.send(e)}),t.on("close",function(e){o?o.shutdown(function(){s.internalDebugLog("shutdown"),e()}):e()})})};
//# sourceMappingURL=maps/opcua-iiot-discovery.js.map
