"use strict";module.exports=function(t){require("source-map-support").install();var u=require("./core/opcua-iiot-core-listener");t.nodes.registerType("OPCUA-IIoT-Event",function(e){t.nodes.createNode(this,e),this.eventType=e.eventType,this.eventTypeLabel=e.eventTypeLabel,this.resultType=e.resultType||"basic",this.queueSize=e.queueSize,this.usingListener=e.usingListener,this.name=e.name,this.showStatusActivities=e.showStatusActivities,this.showErrors=e.showErrors;var n=this;n.subscribed=!1,n.status({fill:"blue",shape:"ring",text:"new"}),n.on("input",function(e){n.subscribed=!n.subscribed,n.usingListener?n.subscribed?n.status({fill:"blue",shape:"dot",text:"subscribed"}):n.status({fill:"blue",shape:"ring",text:"not subscribed"}):n.status({fill:"blue",shape:"dot",text:"injected"});var t=u.getBasicEventFields();switch(n.resultType){case"condition":t.push(u.getConditionFields());break;case"state":t.push(u.getStateFields());break;case"all":t.push(u.getAllEventFields())}var s=u.core.nodeOPCUA.constructEventFilter(t),i=1e3;"number"==typeof e.payload&&(i=e.payload),e.nodetype="events";var a={eventType:e.payload.eventType||n.eventType,eventFilter:e.payload.uaEventFilter||s,eventFields:e.payload.uaEventFields||t,queueSize:e.payload.queueSize||n.queueSize,interval:e.payload.interval||i};e.payload=a,n.send(e)})})};
//# sourceMappingURL=maps/opcua-iiot-event.js.map
